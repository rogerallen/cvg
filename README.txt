cvg - CPU vs. GPU SGEMM performance test
by Roger Allen
Feb 29, 2016

This is just a toy for developers.  

I wanted a simple way to compare CPU vs. GPU SGEMM performance using Intel MKL, NVIDIA CUBLAS & CUBLAS-XT libraries.

Example usage & output:

================================================================================
CPU SGEMM:
================================================================================

> x64/Debug/cvg.exe c 4 6400 6400 26000
Intel MKL sgemm: loops=4 M=6400 N=6400 K=26000
Result:
0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ...[snip]...
0.00000 28719.44922 22169.48633 22673.35742 20154.22656 12596.54492 20154.33008 22673.64648 ...[snip]...
0.00000 22169.48633 24184.95898 20154.36719 20154.42969 10076.95996 20154.09180 20154.15234 ...[snip]...
0.00000 22673.35742 20154.36719 28719.94336 18138.64063 12596.54395 22169.84375 16627.07617 ...[snip]...
0.00000 20154.22656 20154.42969 18138.64063 24185.12891 10076.95898 16123.51660 22169.87695 ...[snip]...
0.00000 12596.54492 10076.95996 12596.54395 10076.95898 12596.49316 10076.95898 12596.54492 ...[snip]...
0.00000 20154.33008 20154.09180 22169.84375 16123.51660 10076.95898 24185.12891 18138.64258 ...[snip]...
0.00000 22673.64648 20154.15234 16627.07617 22169.87695 12596.54492 18138.64258 28719.93555 ...[snip]...
...[snip]...
SGEMM: [6400x26000] * [26000x6400] + [6400x6400]
seconds:     24.031000
Gigabytes:   1.5
Gigaflops:   8519.7
Gigaflops/s: 354.5

================================================================================
GPU CUBLAS SGEMM:
================================================================================

> x64/Debug/cvg.exe g 4 6400 6400 26000
NVIDIA CUBLAS sgemm: loops=4 M=6400 N=6400 K=26000
Device Number: 0
  Device name: GeForce GTX 960
  Memory Clock Rate (KHz): 3505000
  Memory Bus Width (bits): 128
  Peak Memory Bandwidth (GB/s): 112.160000

Result:
0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ...[snip]...
0.00000 28720.24805 22170.63477 22672.59961 20156.65430 12596.54688 20155.56250 22672.87500 ...[snip]...
0.00000 22170.63477 24186.18359 20156.79102 20155.93164 10076.96289 20155.51758 20155.42578 ...[snip]...
0.00000 22672.59961 20156.79102 28720.79492 18140.14648 12596.54688 22171.04297 16626.54688 ...[snip]...
0.00000 20156.65430 20155.93164 18140.14648 24186.32227 10076.96289 16121.77734 22171.04492 ...[snip]...
0.00000 12596.54688 10076.96289 12596.54688 10076.96289 12596.54688 10076.96289 12596.54590 ...[snip]...
0.00000 20155.56250 20155.51758 22171.04297 16121.77734 10076.96289 24186.32422 18140.14844 ...[snip]...
0.00000 22672.87500 20155.42578 16626.54688 22171.04492 12596.54590 18140.14844 28720.79492 ...[snip]...
...[snip]...
SGEMM: [6400x26000] * [26000x6400] + [6400x6400]
seconds:     4.861000
Gigabytes:   1.5
Gigaflops:   8519.7
Gigaflops/s: 1752.7

================================================================================
GPU CUBLASXT SGEMM
================================================================================

> x64/Debug/cvg.exe x 1 6400 6400 26000 6400
NVIDIA CUBLASXT sgemm: loops=1 M=6400 N=6400 K=26000 block_dim=6400
Device Number: 0
  Device name: GeForce GTX 960
  Memory Clock Rate (KHz): 3505000
  Memory Bus Width (bits): 128
  Peak Memory Bandwidth (GB/s): 112.160000

Result:
0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 0.00000 ...[snip]...
0.00000 8225.29395 6349.34717 6493.73779 5772.36523 3607.95508 5772.54639 6494.10303 ...[snip]...
0.00000 6349.34717 6926.82178 5772.54736 5772.59131 2886.00000 5772.04541 5772.36475 ...[snip]...
0.00000 6493.73779 5772.54736 8226.02246 5194.93408 3607.95483 6349.89307 4761.99756 ...[snip]...
0.00000 5772.36523 5772.59131 5194.93408 6927.00342 2886.00000 4617.75342 6349.89307 ...[snip]...
0.00000 3607.95508 2886.00000 3607.95483 2886.00000 3607.95508 2886.00000 3607.95508 ...[snip]...
0.00000 5772.54639 5772.04541 6349.89307 4617.75342 2886.00000 6927.00342 5194.93408 ...[snip]...
0.00000 6494.10303 5772.36475 4761.99756 6349.89307 3607.95508 5194.93408 8226.02246 ...[snip]...
...[snip]...
SGEMM: [6400x26000] * [26000x6400] + [6400x6400]
seconds:     1.347000
Gigabytes:   1.5
Gigaflops:   2129.9
Gigaflops/s: 1581.2